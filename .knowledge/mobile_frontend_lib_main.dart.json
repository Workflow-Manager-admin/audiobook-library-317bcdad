{"is_source_file": true, "format": "Dart", "description": "This is the main source file (main.dart) for a Flutter mobile frontend application of an audiobook library/store. It includes app initialization, theme setup, data models, state management with providers (for user library and playback state), UI screens (store, library, player), and mock payment integration with Stripe.", "external_files": ["package:flutter/material.dart", "package:flutter_dotenv/flutter_dotenv.dart", "package:provider/provider.dart", "package:shared_preferences/shared_preferences.dart", "dart:convert", "package:intl/intl.dart", "package:flutter_stripe/flutter_stripe.dart"], "external_methods": ["WidgetsFlutterBinding.ensureInitialized", "dotenv.load", "stripe.Stripe.publishableKey=", "runApp", "ThemeData", "ChangeNotifier", "notifyListeners", "jsonDecode", "jsonEncode", "SharedPreferences.getInstance", "SharedPreferences.setStringList", "SharedPreferences.setString", "NumberFormat.simpleCurrency", "Navigator.of", "MaterialPageRoute", "showDialog", "AlertDialog", "showSnackBar", "ScaffoldMessenger.of", "setState", "MediaQuery.of", "Size.height", "Size.width"], "published": ["main", "Audiobook", "demoBooks", "PlayerState", "UserLibraryState", "showPurchaseSheet", "AudiobookStoreApp", "StoreScreen", "LibraryScreen", "PlayerScreen", "AudiobookCard"], "classes": [{"name": "Audiobook", "description": "Data model representing an audiobook, including attributes like id, title, author, coverUrl, price, description, audioUrl, and duration."}, {"name": "PlayerState", "description": "Provider class managing the current audiobook, playback state, position, and duration for the audio player."}, {"name": "UserLibraryState", "description": "Provider class managing user's purchased books, playback positions, loaded from and saved to SharedPreferences."}], "methods": [{"name": "main", "description": "Application entry point: initializes Flutter, loads environment variables, configures Stripe, and runs the app."}, {"name": "_buildTheme", "description": "Builds and returns the ThemeData for the application, defining colors, text styles, appBar, bottomNavigationBar, and other themes."}, {"name": "loadFromPrefs", "description": "Loads user's purchased book IDs and playback positions from SharedPreferences."}, {"name": "buyBook", "description": "Adds a book ID to the user's owned books list and persists to SharedPreferences."}, {"name": "updatePlaybackPosition", "description": "Updates and persists the playback position for a specific book."}, {"name": "setBook", "description": "Sets the current book in the PlayerState along with initial playback position."}, {"name": "setPosition", "description": "Updates the current playback position."}, {"name": "setPlaying", "description": "Updates playing state (play/pause)."}, {"name": "reset", "description": "Resets the player state to initial."}], "calls": ["WidgetsFlutterBinding.ensureInitialized", "dotenv.load", "stripe.Stripe.publishableKey=", "runApp", "Provider.of", "MaterialPageRoute", "showDialog", "ScaffoldMessenger.of", "Navigator.of", "setState", "MediaQuery.of"], "search-terms": ["main.dart", "Audiobook", "Stripe", "purchase", "library management", "audio player state", "Flutter theme setup", "store screen", "library screen", "player screen", "demoBooks", "Stripe mock payment"], "state": 2, "file_id": 2, "knowledge_revision": 48, "git_revision": "", "revision_history": [{"32": ""}, {"38": ""}, {"43": ""}, {"44": ""}, {"46": ""}, {"47": ""}, {"48": ""}], "hash": "33725109795302e2c9ec8a2c6036adcd", "format-version": 4, "code-base-name": "mobile_frontend", "filename": "mobile_frontend/lib/main.dart"}